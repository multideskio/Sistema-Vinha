function formata(){var cleaveCpf=new Cleave(".cpf",{numericOnly:!0,delimiters:[".",".","-"],blocks:[3,3,3,2],uppercase:!0}),cleaveCep=new Cleave(".cep",{numericOnly:!0,delimiters:["-"],blocks:[5,3],uppercase:!0}),cleaveTelFixo=new Cleave(".telFixo",{numericOnly:!0,delimiters:["(",") ","-"],blocks:[0,2,4,4]}),cleaveCelular=new Cleave(".celular",{numericOnly:!0,delimiters:["+"," (",") "," ","-"],blocks:[0,2,2,1,4,4]})}function search(){$("#inSearchBtn").on("click",(function(e){var search;atualizarTabela($("#inSearch").val())})),$("#inSearch").on("keypress",(function(e){var search;13===e.which&&atualizarTabela($("#inSearch").val())})),$("#pager").on("click","a",(function(e){e.preventDefault();var href=$(this).attr("href"),urlParams=new URLSearchParams(href),page=urlParams.get("page"),search=urlParams.get("search");console.log(page),isNaN(page)||atualizarTabela(search,page)}))}function cadastro(){console.log("Function create init"),$("#form0").ajaxForm({beforeSubmit:function(formData,jqForm,options){},success:function(responseText,statusText,xhr,$form){atualizarTabela(),$("#form")[0].reset(),Swal.fire({text:"Cadastrado!",icon:"success"})},error:function(xhr,status,error){xhr.responseJSON&&xhr.responseJSON.messages?Swal.fire({title:"Ocorreu um erro",text:xhr.responseJSON.messages.error,icon:"error"}):Swal.fire({title:"Ocorreu um erro",text:"Erro desconhecido...",icon:"error"})}})}function atualizarTabela(search=!1,page=1){$(".noresult").hide(),$("#perfilCards").empty(),$("#cardResult").hide(),$(".loadResult").show();var url=_baseUrl+"api/v1/administradores?";search&&(url+="search="+encodeURIComponent(search)+"&"),page&&(url+="page="+page),$.getJSON(url).done((function(data,textStatus,jqXHR){$("#numResults").html(data.num),$("#pager").html(data.pager),0===data.rows.length?($("#cardResult").hide(),$(".noresult").show()):($(".noresult").hide(),$("#cardResult").show()),data.rows.forEach(row=>{var randomColor=Math.floor(16777215*Math.random()).toString(16);$("#perfilCards").append(`\n                    <div class="col-xl-3">\n                    <div class="card shadow-sm h-100">\n                    <div class="card-body text-center">\n                    <div class="mx-auto avatar-md mb-3">\n                    <img src="${row.foto}" onerror="this.onerror=null; this.src='https://placehold.co/50/${randomColor}/FFF?text=${row.nome.charAt(0)}';" class="img-fluid rounded-circle" style="width: 100%; height: 100%; object-fit: cover;">\n                    </div>\n                    <h5 class="card-title mb-1">#${row.id} - ${row.nome} ${row.sobrenome}</h5>\n                    <hr>\n                    <div class="text-start">\n                    <p class="text-muted mb-2"><strong>CPF:</strong> ${row.cpf}</p>\n                    <p class="text-muted mb-2"><strong>Email:</strong> ${row.email}</p>\n                    <p class="text-muted mb-2"><strong>Celular:</strong> ${row.celular}</p>\n                    <p class="text-muted mb-0"><strong>Telefone:</strong> ${row.telefone}</p>\n                    </div>\n                    </div>\n                    <a href="${_baseUrl}admin/admin/${row.id}" class="btn text-white bg-primary card-footer">\n                    <i class="ri-pencil-line"></i> EDITAR\n                    </a>\n                    </div>\n                    </div>`)}),$(".loadResult").hide()})).fail((function(jqXHR,textStatus,errorThrown){console.error("Erro ao carregar os dados:",textStatus,errorThrown),exibirMensagem("error",{messages:{error:"Erro ao carregar os dados."}}),$(".loadResult").hide()}))}$(document).ready((function(){formata(),atualizarTabela(),search(),cadastro()}));