function update(id,nome,desc){$("#updateRegiao").modal("show"),$("#idRegiao").html(id),$("#regiaoUpdate").val(nome),$("#descUpdate").val(desc),$(".regiaoUpdate").html(nome),$("#formUpdate").removeAttr("action").attr("action",`${_baseUrl}api/v1/regioes/${id}`)}function atualizarTabela(search=!1,page=1){$("#tabela-dados").empty(),$("#cardResult").hide(),$(".loadResult").show();var url=_baseUrl+"api/v1/regioes?";search&&(url+="search="+search+"&"),page&&(url+="page="+page),$.getJSON(url).done((function(data,textStatus,jqXHR){$("#pager").html(data.pager),0===data.rows.length?($("#cardResult").hide(),$(".noresult").show()):($("#cardResult").show(),$(".noresult").hide()),$.each(data.rows,(function(index,regiao){var newRow=`\n                    <tr>\n                        <td>#${regiao.id}</td>\n                        <td>${regiao.nome}<br>${regiao.descricao}</td>\n                        <td>\n                        <div class="btn-group" role="group">\n                            <a href="#" class="btn btn-dark btn-sm" onclick="update('${regiao.id}', '${regiao.nome}', '${regiao.descricao}')">\n                                <i class="ri-pencil-line"></i>\n                            </a>\n                            \x3c!-- <a href="#" class="btn btn-danger btn-sm sa-warning" onclick="excluir('${regiao.id}', 'regioes')">\n                                <i class="ri-delete-bin-6-line"></i>\n                            </a> --\x3e\n                            </div>\n                        </td>\n                    </tr>\n                `;$("#tabela-dados").append(newRow)})),$(".loadResult").hide()})).fail((function(jqXHR,textStatus,errorThrown){console.error("Erro ao carregar os dados:",textStatus,errorThrown)}))}function exibirMensagem(type,message){Swal.fire({title:type.charAt(0).toUpperCase()+type.slice(1),text:message,icon:type,confirmButtonClass:"btn btn-primary w-xs mt-2",buttonsStyling:!1})}function excluir(id,endPoint){Swal.fire({title:"Tem certeza?",text:"Você não poderá reverter isso!",icon:"warning",showCancelButton:!0,confirmButtonText:"Sim, exclua-o!",confirmButtonClass:"btn btn-primary w-xs me-2 mt-2",cancelButtonClass:"btn btn-danger w-xs mt-2",buttonsStyling:!1,showCloseButton:!0}).then(result=>{result.value&&$.ajax({type:"DELETE",url:`${_baseUrl}api/v1/${endPoint}/${id}`,dataType:"JSON"}).done(()=>{Swal.fire({title:"Excluído!",text:"O registro foi excluído com sucesso.",icon:"success",confirmButtonClass:"btn btn-primary w-xs mt-2",buttonsStyling:!1}),atualizarTabela()}).fail(()=>{Swal.fire({title:"Erro ao excluir",text:"Ocorreu um erro ao tentar excluir o registro.",icon:"error",confirmButtonClass:"btn btn-primary w-xs mt-2",buttonsStyling:!1})})})}$(document).ready((function(){$("#formUpdate").ajaxForm({type:"PUT",beforeSubmit:function(formData,jqForm,options){},success:function(responseText,statusText,xhr,$form){atualizarTabela(),exibirMensagem("success","Atualizado!")},error:function(xhr,status,error){xhr.responseJSON&&xhr.responseJSON.messages?exibirMensagem("error",xhr.responseJSON.messages.nome):exibirMensagem("error",{messages:{error:"Erro desconhecido."}})}}),$("#formCad").ajaxForm({beforeSubmit:function(formData,jqForm,options){},success:function(responseText,statusText,xhr,$form){atualizarTabela(),$("#formCad")[0].reset(),exibirMensagem("success","Cadastrado!")},error:function(xhr,status,error){xhr.responseJSON&&xhr.responseJSON.messages?exibirMensagem("error",xhr.responseJSON):exibirMensagem("error",{messages:{error:"Erro desconhecido."}})}}),$("#inSearchBtn").click((function(e){var search;e.preventDefault(),atualizarTabela($("#inSearch").val())})),$("#inSearch").keypress((function(e){var search;13===e.which&&(e.preventDefault(),atualizarTabela($("#inSearch").val()))})),$("#pager").on("click","a",(function(e){e.preventDefault();var href=$(this).attr("href"),urlParams=new URLSearchParams(href),page=urlParams.get("page"),search=urlParams.get("search");isNaN(page)||atualizarTabela(search,page)})),atualizarTabela()}));